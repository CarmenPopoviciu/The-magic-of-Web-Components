<!DOCTYPE html>
<html>
    <head>
        <title>The magic of Web Components!</title>

        <link rel="stylesheet" href="../node_modules/reveal.js/css/reveal.css">
        <link rel="stylesheet" href="../node_modules/reveal.js/css/theme/simple.css">
        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="../node_modules/reveal.js/lib/css/zenburn.css">

        <link rel="stylesheet" href="styles/general.css">
    </head>

    <body>
        <div class="reveal">
            <div class="slides">
                <!-- INTRO @Carmen -->
                <section data-background="images/Sword_In_the_Stone_Castle.jpg" style="color: white;">
                    <h1 style="color: white;">The Magic of Web Components</h1>
                    <div class="profile">
                        <img src="images/carmen-profile.jpg" style="border-radius: 2em; width: 3em;">
                        @CarmenPopoviciu
                    </div>

                    <div class="profile">
                        <img src="images/remco-profile.jpg" style="border-radius: 2em; width: 3em;">
                        @remcoGubbels
                    </div>
                </section>

                <!-- WEB COMPONENTS @Remco -->
                    <!-- WEB COMPONENTS: why? -->
                    <!-- WEB COMPONENTS: Short overview -->

                <section>
                    <h3>Imagine you have this</h3>
                    <pre>
                        <code>
&lt;div class="merlin"&gt;
    &lt;div class="another-class"&gt;
        &lt;div class="and-another-class"&gt;
            &lt;div class="phew-are-we-there-yet"&gt;
                &lt;div class="aaaand-another-class"&gt;
                    &lt;div class="this-will-never-end-right"&gt;
                        &lt;di&gt;>o_O&lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
                        </code>
                    </pre>
                </section>

                <section data-background="images/sugarpot1.gif"></section>

                <section>
                    <pre>
                        <code style="max-height: 500px;">
&lt;div class="merlin"&gt;
    &lt;div class="another-class"&gt;
        &lt;div class="and-another-class"&gt;
            &lt;div class="phew-are-we-there-yet"&gt;
                &lt;div class="aaaand-another-class"&gt;
                    &lt;div class="this-will-never-end-right"&gt;
                        &lt;div&gt;o_O
                            &lt;div class="arthur"&gt;
                                &lt;div class="richard"&gt;
                                    &lt;div class="archimedes"&gt;:(&lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
                        </code>
                    </pre>
                </section>

                <section data-background="images/sugarpot.gif"></section>

                <section data-background="images/happy-sugarpot.jpg"></section>

                <section>
                    <h2>Web Components</h2>
                    <blockquote>In a nutshell, Web Components are a standard that allows us to encapsulate and share reusable widgets.
                        The idea is to bundle and isolate markup and style together as custom components.
                    </blockquote>
                </section>

                <section>
                    <h2>Web Components</h2>
                    <ul class="list">
                        <li class="fragment">
                            <img src="images/icon-customelements.png">
                            <span>Custom Elements</span>
                        </li>
                        <li class="fragment">
                            <img src="images/icon-templates.png">
                            <span>Templates</span>
                        </li>
                        <li class="fragment">
                            <img src="images/icon-shadowdom.png">
                            <span>Shadow Dom</span>
                        </li>
                        <li class="fragment">
                            <img src="images/icon-htmlimports.png">
                            <span>HTML Imports</span>
                        </li>
                    </ul>
                </section>

                <!-- CUSTOM ELEMENTS @Carmen -->
                    <section>
                        <h2>Web Components</h2>
                        <ul class="list">
                            <li>
                                <img src="images/icon-customelements.png">
                                <span>Custom Elements</span>
                            </li>
                            <li class="fade">
                                <img src="images/icon-templates.png">
                                <span>Templates</span>
                            </li>
                            <li class="fade">
                                <img src="images/icon-shadowdom.png">
                                <span>Shadow Dom</span>
                            </li>
                            <li class="fade">
                                <img src="images/icon-htmlimports.png">
                                <span>HTML Imports</span>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <h1>Custom Elements</h1>
                        Allow you to extend the HTML vocabulary and define your own, new, fully-featured DOM elements
                    </section>

                    <section>
                        <h2>&lt;dom-code&gt;&lt;/dom-code&gt;</h2>
                    </section>

                    <section>
                        <h2>Why Custom Elements?</h2>
                        <div class="fragment">2 words</div>
                    </section>

                    <section>
                        <h2>Sexy Markup!!!</h2>
                        <img src="images/sexy-markup.gif">
                    </section>

                    <section>
                        <h2>Just kidding ;)</h2>
                        <h2>That's not the only reason</h2>
                    </section>

                    <section>
                        <h2>Custom Elements give you</h2>
                        <p>
                            <span class="fragment"><strong> declarative</strong>,</span>
                            <span class="fragment"><strong> readable</strong>,</span>
                            <span class="fragment"><strong> meaningful</strong>,</span>
                            <span class="fragment"><strong> reusable</strong>,</span>
                            <span class="fragment"><strong>self sustainable</strong></span>
                            <span class="fragment">HTML Elements</span>
                        </p>
                    </section>

                    <section>
                        <h2>Custom Element Lifecycle</h2>
                        <ul class="list-left">
                            <li class="fragment">Register</li>
                            <li class="fragment">Instantiate</li>
                            <li class="fragment">Attach/Detach</li>
                            <li class="fragment">Attribute changes</li>
                        </ul>
                    </section>

                    <section>
                        <h2>Custom Element Registration</h2>
                        Is the process of adding an <strong>element definition</strong> to a
                        <strong>registry</strong>

                        <div class="note fragment">
                            <p><strong>element definition:</strong> type, prototype, lifecycle callbacks ...</p>
                            <p><strong>registry:</strong> set of element definitions associated to a document</p>
                        </div>
                    </section>

                    <section>
                        <h3>Register a Custom Element</h3>
                        <pre>
                            <code class="javascript">
document.registerElement('the-merlin', // the type
    {
      // the prototype. HTMLElement/SVGElement by default
      prototype: Object.create(HTMLElement.prototype)
    }
); // returns a constructor function
                            </code>
                        </pre>
                    </section>

                    <section>
                        <h3>Custom Elements with public APIs</h3>
                            <pre>
                                <code class="javascript">
var MerlinProto = Object.create(HTMLElement.prototype);
// Public API
MerlinProto.castSpell = function() {
  console.log('You have been turned into a frog!');
};

document.registerElement('the-merlin', {
    prototype: MerlinProto
});
                                </code>
                            </pre>
                    </section>

                    <section>
                        <h3>Custom Tag Elements vs. Type Extension Elements</h3>
                                <pre>
                                    <code class="javascript">
// custom tag
document.registerElement('the-merlin', {
    prototype: Object.create(HTMLElement.prototype)
});

// type extension
document.registerElement('magnificent-merlin', {
    prototype: Object.create(HTMLElement.prototype),
    extends: 'the-merlin'
});
                                    </code>
                                </pre>
                    </section>

                    <section>
                        <h3>Instantiating Custom Tag Elements</h3>
                            <pre>
                                <code class="html">
// HTML
&lt;the-merlin&gt;&lt;/the-merlin&gt;
                                </code>
                            </pre>

                            <pre>
                                <code class="javascript">
// JS
var merlin = document.createElement('the-merlin');

// or

var merlin = new TheMerlin();
                                </code>
                            </pre>
                    </section>

                    <section>
                        <h3>Instantiating Extension Type Elements</h3>
                                <pre>
                                    <code class="html">
// HTML
&lt;the-merlin is="magnificent-merlin"&gt;&lt;/the-merlin&gt;
                                    </code>
                                </pre>

                                <pre>
                                    <code class="javascript">
// JS
var superMerlin = document.createElement('the-merlin', 'magnificent-merlin');

// or

var superMerlin = new SuperMerlin();
                                    </code>
                                </pre>
                    </section>

                    <section>
                        <h3>Lifecycle callbacks</h3>
                        <ul>
                            <li>
                                <span><strong>createdCallback</strong></span>
                                <span style="font-size: 26px;"> (instance was created and its definition was registered)</span>
                            </li>
                            <li>
                                <span><strong>attachedCallback</strong></span>
                                <span style="font-size: 26px;"> (element was inserted into the document)</span>
                            </li>
                            <li>
                                <span><strong>detachedCallback</strong></span>
                                <span style="font-size: 26px;"> (element was removed from the document)</span>
                            </li>
                            <li>
                                <span><strong>attributeChangedCallback</strong></span>
                                <span style="font-size: 26px;"> (element's attribute was added, changed or removed)</span>
                            </li>
                        </ul>
                    </section>

                <!-- TEMPLATES @Remco -->
                    <section>
                        <h2>Web Components</h2>
                        <ul class="list">
                            <li class="fade">
                                <img src="images/icon-customelements.png">
                                <span>Custom Elements</span>
                            </li>
                            <li>
                                <img src="images/icon-templates.png">
                                <span>Templates</span>
                            </li>
                            <li class="fade">
                                <img src="images/icon-shadowdom.png">
                                <span>Shadow Dom</span>
                            </li>
                            <li class="fade">
                                <img src="images/icon-htmlimports.png">
                                <span>HTML Imports</span>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <h1>Templates</h1>
                        Enable you to store HTML data inside an HTML document. The content of a &lt;template&gt;
                        element is parsed without interpreting it (no loading of images etc.).
                    </section>

                    <section>
                        <h2>Why do we want templates?</h2>
                        <ul class="list-left">
                            <li class="fragment">Separation of concerns</li>
                            <li class="fragment">Cloneable so reusable</li>
                        </ul>
                    </section>

                    <section>
                        <h2>Important to remember!</h2>
                        <ul class="text-left">
                            <li class="fragment">Parsed as HTML</li>
                            <li class="fragment">Not rendered</li>
                            <li class="fragment">Can be cloned</li>
                            <li class="fragment">Instantiated at runtime when the user wants it</li>
                        </ul>
                    </section>

                    <section>
                        <h3>How does a template look?</h3>
                        <pre>
                            <code class="hljs html">
&lt;template id="example">
    &lt;style>
    &lt;/style>
    &lt;div class="outer">
        &lt;span>An Example&lt;/span>
    &lt;/div>
    &lt;script>&lt;/script>
&lt;/template>
                            </code>
                        </pre>
                    </section>

                    <section>
                        <h3>Enable a template</h3>
                        <pre>
                            <code class="javascript">
//Create shadowdom
var shadow = this.createShadowRoot();
//Import the template
var template = importDoc.querySelector('#example');
//Clone the template
var node = template.content.cloneNode(true);
//Append node to the shadowtree
shadow.appendChild(node);
                            </code>
                        </pre>
                    </section>

                    <!--<section>
                        <h3>CloneNode() vs. ImportNode()</h3>
                        <p class="fragment">CloneNode() the node document is updated when the nodes are appended with appendChild()</p>
                        <p class="fragment">Document.importNode() the node document is updated when the nodes are cloned.</p>
                    </section>-->

                    <section>
                        <h3>CSS in templates</h3>
                        <pre>
                            <code class="html">
&lt;template id="example">
    &lt;style>
        span { color: red; }
    &lt;/style>
    &lt;div class="outer">
        &lt;span>An Example&lt;/span>
    &lt;/div>
    &lt;script>&lt;/script>
&lt;/template>
                            </code>
                        </pre>
                    </section>

                    <section>
                        <h3>CSS in templates</h3>
                        <p>Sadly &lt;link> doesn't work...</p>
                        <img src="images/grumpy-merlin.png">
                    </section>



                    <section>
                        <h3>CSS in templates</h3>
                        <p>&lt;style> @import "includes/template.css"; &lt;/style> does work!</p>
                        <img src="images/happy-merlin.gif">
                    </section>

                <!-- SHADOW DOM @Remco -->
                    <section>
                        <h2>Web Components</h2>
                        <ul class="list">
                            <li class="fade">
                                <img src="images/icon-customelements.png">
                                <span>Custom Elements</span>
                            </li>
                            <li class="fade">
                                <img src="images/icon-templates.png">
                                <span>Templates</span>
                            </li>
                            <li>
                                <img src="images/icon-shadowdom.png">
                                <span>Shadow Dom</span>
                            </li>
                            <li class="fade">
                                <img src="images/icon-htmlimports.png">
                                <span>HTML Imports</span>
                            </li>
                        </ul>
                    </section>

                    <section data-background="rgb(169, 169, 167)">
                        <h1>Shadow Dom</h1>
                        Encapsulates and hides the innards of a custom element inside a nested document.
                    </section>

                    <section data-background="rgb(169, 169, 167)">
                        <h3>Why Shadow Dom?</h3>
                        <ul>
                            <li class="fragment">Style Encapsulation</li>
                            <li class="fragment">Script scoping</li>
                            <li class="fragment">Separation of Concerns</li>
                        </ul>
                    </section>

                    <section data-background="rgb(169, 169, 167)">
                        <h3>Shadow Dom Concepts</h3>
                        <ul>
                            <li class="fragment"><strong>Document tree</strong> - a node tree whose root node is a document</li>
                            <li class="fragment"><strong>Shadow host</strong> - element that hosts one shadow tree</li>
                            <li class="fragment"><strong>Shadow tree</strong> - a node tree hosted by a shadow host</li>
                            <li class="fragment"><strong>Shadow root</strong> - the root node of a shadow tree</li>
                            <li class="fragment"><strong>Shadow boundary</strong> - the invisible barrier that encapsulates scripts and css</li>
                        </ul>
                    </section>

                    <section>
                        <h3>Overview</h3>
                        <img src="images/shadow-tree.svg">
                    </section>

                    <section>
                        <h3>Overview</h3>
                        <img src="images/shadow-render.svg">
                    </section>

                    <section data-background="rgb(169, 169, 167)">
                        <h3>Activate the shadow dom</h3>
                        <pre>
                            <code>
root = element.createShadowRoot({ mode: ... });
                            </code>
                        </pre>
                    </section>

                    <section data-background="rgb(169, 169, 167)">
                        <h3>'closed' vs. 'open'</h3>
                        <pre class="fragment">
                            <code class="html">
root = element.createShadowRoot({ mode: 'open' });

root = element.createShadowRoot({ mode: 'closed' });
                            </code>
                        </pre>
                    </section>

                    <section>
                        <h3>Slot</h3>
                        <img height="500px" src="images/slotting.svg">
                    </section>

                <section>
                    <section data-background="rgb(169, 169, 167)">
                        <h3>Slot</h3>
                        <pre class="half">
Shadow Tree
                            <code class="html">
&lt;slot name="example"&gt;&lt;/slot&gt;
                            </code>
                            </pre>
                        <pre class="half">
Document tree
                            <code class="html">
&lt;div slot="example"&gt;Example text&lt;/div&gt;
                            </code>
                        </pre>
                    </section>
                    <section>
                    <img height="400px" class="left" src="images/shadow-dom.png" style="margin-top: 45px;">
                    <pre class="half">
                        <code class="html">
&lt;body>
    &lt;shadowHostBC>
        &lt;div>&lt;/div>
        &lt;div>&lt;/div>
        &lt;div>&lt;/div>
        &lt;div>&lt;/div>
        &lt;div>&lt;/div>
    &lt;/shadowHostBC>
    &lt;div>
        &lt;shadowHostD>
            &lt;div>&lt;/div>
            &lt;div>&lt;/div>
        &lt;/shadowHostD>
        &lt;div>&lt;/div>
    &lt;/div>
&lt;/body>
                        </code>
                    </pre>
                </section>
                </section>


                <!-- HTML IMPORTS @Carmen -->
                    <section>
                        <h2>Web Components</h2>
                        <ul class="list">
                            <li class="fade">
                                <img src="images/icon-customelements.png">
                                <span>Custom Elements</span>
                            </li>
                            <li class="fade">
                                <img src="images/icon-templates.png">
                                <span>Templates</span>
                            </li>
                            <li class="fade">
                                <img src="images/icon-shadowdom.png">
                                <span>Shadow Dom</span>
                            </li>
                            <li>
                                <img src="images/icon-htmlimports.png">
                                <span>HTML Imports</span>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <h2>HTML Imports</h2>
                        is a way to include HTML documents in other HTML documents
                    </section>

                    <section>
                        <h2>Why HTML Imports</h2>
                        <p>Most of the web's content has a simple and declarative way to load itself except HTML</p>
                        <ul class="list-left">
                            <li class="fragment">JS has &lt;script&gt;</li>
                            <li class="fragment">CSS has &lt;link rel="stylesheet"&gt;</li>
                            <li class="fragment">Video has &lt;video&gt;</li>
                            <li class="fragment">etc.</li>
                        </ul>
                    </section>

                    <section>
                        <h3>Declaring HTML Imports</h3>
                        <pre>
                            <code>
&lt;head&gt;
  &lt;link rel="import" href="/path/my-html.html"&gt;
&lt;/head&gt;
                            </code>
                        </pre>
                    </section>

                    <section>
                        <h3>HTML Imports Concepts</h3>
                        <ul>
                            <li><strong>Import Referrer - </strong>the document that links to an import</li>
                            <li class="fragment"><strong>Import location - </strong>the URL of the import</li>
                            <li class="fragment"><strong>Imported document - </strong>the Document that represents the import in the import referrer</li>
                        </ul>
                    </section>

                    <section>
                        <h3>link.import</h3>
                        Including an <strong>import</strong> on a page returns a Document not its content
                        <pre>
                            <code class="javascript">
var content = document.querySelector('link[rel="import"]').import;
                            </code>
                        </pre>
                    </section>

                <!-- BROWSER SUPPORT @Remco -->
                <section>
                    <h2>Browser Support</h2>
                    <div class="fragment">
                        <h4>According to webcomponents.org:</h4>
                        <img src="images/support.PNG">
                    </div>
                </section>

                <section>
                    <p>However sadly this is not the entire truth</p>
                    <img src="images/angry-merlin.gif">
                </section>

                <!-- LIBS & POLYFILLS @Carmen -->
                <section>
                    <h2>Libraries and Polyfills</h2>
                    <div style="margin-top: 40px;">
                        <img src="images/icon-polymer.png" style="padding: 15px;">
                        <img src="images/icon-xtags.png" style="padding: 15px;">
                        <img src="images/icon-bosonic.png" style="padding: 15px;">
                        <p>webcomponents.js polyfill</p>
                    </div>
                </section>


                <!-- LIVE DEMO -->
                <section>
                    <h1>DEMO TIME</h1>
                </section>

                <!-- OUTRO @Carmen -->
                <section>
                    <img src="images/dancing-merlin.gif">
                    <h1>Thank you!</h1>
                </section>
            </div>
        </div>

        <!-- lib scripts -->
        <script src="../node_modules/reveal.js/lib/js/head.min.js"></script>
        <script src="../node_modules/reveal.js/js/reveal.js"></script>


        <!-- reveal.js initialization -->
        <script src="reveal.init.js"></script>
    </body>
</html>